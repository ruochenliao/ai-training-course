<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BMIèº«ä½“è´¨é‡æŒ‡æ•°è®¡ç®—å™¨</title>
    <style>
        /* CSSå˜é‡å®šä¹‰ */
        :root {
            --primary-color: #4f46e5;
            --primary-dark: #3730a3;
            --secondary-color: #f8fafc;
            --accent-color: #10b981;
            --warning-color: #f59e0b;
            --danger-color: #ef4444;
            --info-color: #3b82f6;
            --text-color: #1e293b;
            --text-light: #64748b;
            --border-color: #e2e8f0;
            --shadow-light: 0 1px 3px rgba(0, 0, 0, 0.1);
            --shadow-medium: 0 4px 6px rgba(0, 0, 0, 0.1);
            --shadow-large: 0 10px 25px rgba(0, 0, 0, 0.15);
            --border-radius: 12px;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            
            /* BMIé¢œè‰²å®šä¹‰ */
            --underweight-color: #3b82f6;
            --normal-color: #10b981;
            --overweight-color: #f59e0b;
            --obese-color: #ef4444;
        }

        /* å…¨å±€æ ·å¼é‡ç½® */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: var(--text-color);
        }

        /* ä¸»å®¹å™¨ */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: var(--shadow-large);
            overflow: hidden;
            animation: slideUp 0.6s ease-out;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* å¤´éƒ¨åŒºåŸŸ */
        .header {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%);
            color: white;
            padding: 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: rotate 20s linear infinite;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .header h1 {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 10px;
            position: relative;
            z-index: 1;
        }

        .header p {
            font-size: 16px;
            opacity: 0.9;
            position: relative;
            z-index: 1;
        }

        /* ä¸»è¦å†…å®¹åŒºåŸŸ */
        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            padding: 30px;
        }

        /* è¾“å…¥åŒºåŸŸ */
        .input-section {
            background: var(--secondary-color);
            border-radius: var(--border-radius);
            padding: 25px;
            box-shadow: var(--shadow-light);
        }

        .section-title {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 20px;
            color: var(--text-color);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-label {
            display: block;
            font-size: 14px;
            font-weight: 600;
            color: var(--text-color);
            margin-bottom: 8px;
        }

        .input-wrapper {
            position: relative;
            display: flex;
            align-items: center;
        }

        .input-field {
            width: 100%;
            padding: 15px 20px;
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius);
            font-size: 16px;
            transition: var(--transition);
            background: white;
        }

        .input-field:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
        }

        .input-field.error {
            border-color: var(--danger-color);
            box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.1);
        }

        .unit-selector {
            margin-left: 10px;
            padding: 15px;
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius);
            background: white;
            cursor: pointer;
            transition: var(--transition);
        }

        .unit-selector:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .error-message {
            color: var(--danger-color);
            font-size: 12px;
            margin-top: 5px;
            display: none;
        }

        .calculate-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%);
            color: white;
            border: none;
            border-radius: var(--border-radius);
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            margin-top: 10px;
        }

        .calculate-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        .calculate-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        /* ç»“æœåŒºåŸŸ */
        .result-section {
            background: var(--secondary-color);
            border-radius: var(--border-radius);
            padding: 25px;
            box-shadow: var(--shadow-light);
        }

        .bmi-display {
            text-align: center;
            margin-bottom: 25px;
            padding: 20px;
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-light);
        }

        .bmi-value {
            font-size: 48px;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 10px;
        }

        .bmi-category {
            font-size: 18px;
            font-weight: 600;
            padding: 8px 16px;
            border-radius: 20px;
            display: inline-block;
            margin-bottom: 10px;
        }

        .bmi-description {
            font-size: 14px;
            color: var(--text-light);
        }

        /* BMIåˆ†ç±»é¢œè‰² */
        .underweight {
            background: rgba(59, 130, 246, 0.1);
            color: var(--underweight-color);
        }

        .normal {
            background: rgba(16, 185, 129, 0.1);
            color: var(--normal-color);
        }

        .overweight {
            background: rgba(245, 158, 11, 0.1);
            color: var(--warning-color);
        }

        .obese {
            background: rgba(239, 68, 68, 0.1);
            color: var(--danger-color);
        }

        /* BMIå›¾è¡¨ */
        .bmi-chart {
            margin-bottom: 25px;
        }

        .chart-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 15px;
            text-align: center;
        }

        .chart-container {
            background: white;
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: var(--shadow-light);
        }

        .chart-bar {
            height: 40px;
            border-radius: 20px;
            position: relative;
            background: linear-gradient(to right, 
                var(--underweight-color) 0% 18.5%,
                var(--normal-color) 18.5% 25%,
                var(--warning-color) 25% 30%,
                var(--danger-color) 30% 100%);
            margin-bottom: 15px;
        }

        .chart-indicator {
            position: absolute;
            top: -5px;
            width: 4px;
            height: 50px;
            background: #000;
            border-radius: 2px;
            transition: var(--transition);
            opacity: 0;
        }

        .chart-indicator.show {
            opacity: 1;
        }

        .chart-labels {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: var(--text-light);
        }

        .chart-ranges {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-top: 15px;
        }

        .range-item {
            text-align: center;
            padding: 10px;
            border-radius: var(--border-radius);
            font-size: 12px;
        }

        .range-item.underweight {
            background: rgba(59, 130, 246, 0.1);
            color: var(--underweight-color);
        }

        .range-item.normal {
            background: rgba(16, 185, 129, 0.1);
            color: var(--normal-color);
        }

        .range-item.overweight {
            background: rgba(245, 158, 11, 0.1);
            color: var(--warning-color);
        }

        .range-item.obese {
            background: rgba(239, 68, 68, 0.1);
            color: var(--danger-color);
        }

        /* å¥åº·å»ºè®®åŒºåŸŸ */
        .advice-section {
            grid-column: 1 / -1;
            background: white;
            border-radius: var(--border-radius);
            padding: 25px;
            box-shadow: var(--shadow-light);
            margin-top: 10px;
        }

        .advice-content {
            display: none;
        }

        .advice-content.show {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .advice-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .advice-list {
            list-style: none;
        }

        .advice-list li {
            padding: 8px 0;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: flex-start;
            gap: 10px;
        }

        .advice-list li:last-child {
            border-bottom: none;
        }

        .advice-icon {
            margin-top: 2px;
        }

        /* å‚è€ƒä¿¡æ¯åŒºåŸŸ */
        .reference-section {
            grid-column: 1 / -1;
            background: var(--secondary-color);
            border-radius: var(--border-radius);
            padding: 25px;
            box-shadow: var(--shadow-light);
            margin-top: 10px;
        }

        .reference-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .reference-card {
            background: white;
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: var(--shadow-light);
        }

        .reference-card h4 {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--text-color);
        }

        .reference-card p {
            font-size: 14px;
            color: var(--text-light);
            line-height: 1.5;
        }

        /* çŠ¶æ€æç¤º */
        .status-message {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: var(--border-radius);
            color: white;
            font-weight: 600;
            box-shadow: var(--shadow-large);
            transform: translateX(100%);
            transition: var(--transition);
            z-index: 1000;
        }

        .status-message.show {
            transform: translateX(0);
        }

        .status-message.success {
            background: var(--accent-color);
        }

        .status-message.error {
            background: var(--danger-color);
        }

        .status-message.info {
            background: var(--info-color);
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }

            .container {
                border-radius: 16px;
            }

            .header {
                padding: 20px;
            }

            .header h1 {
                font-size: 24px;
            }

            .main-content {
                grid-template-columns: 1fr;
                gap: 20px;
                padding: 20px;
            }

            .advice-section,
            .reference-section {
                margin-top: 0;
            }

            .bmi-value {
                font-size: 36px;
            }

            .chart-ranges {
                grid-template-columns: repeat(2, 1fr);
            }

            .reference-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 480px) {
            .header h1 {
                font-size: 20px;
            }

            .header p {
                font-size: 14px;
            }

            .bmi-value {
                font-size: 28px;
            }

            .chart-ranges {
                grid-template-columns: 1fr;
            }
        }

        /* åŠ è½½åŠ¨ç”» */
        .loading {
            display: inline-block;
            width: 16px;
            height: 16px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- å¤´éƒ¨åŒºåŸŸ -->
        <div class="header">
            <h1>âš–ï¸ BMIèº«ä½“è´¨é‡æŒ‡æ•°è®¡ç®—å™¨</h1>
            <p>ç§‘å­¦è¯„ä¼°æ‚¨çš„èº«ä½“å¥åº·çŠ¶å†µï¼Œæä¾›ä¸ªæ€§åŒ–å¥åº·å»ºè®®</p>
        </div>

        <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
        <div class="main-content">
            <!-- è¾“å…¥åŒºåŸŸ -->
            <div class="input-section">
                <div class="section-title">
                    <span>ğŸ“Š</span>
                    <span>è¾“å…¥æ‚¨çš„èº«ä½“æ•°æ®</span>
                </div>

                <!-- èº«é«˜è¾“å…¥ -->
                <div class="input-group">
                    <label class="input-label" for="height">èº«é«˜</label>
                    <div class="input-wrapper">
                        <input 
                            type="number" 
                            id="height" 
                            class="input-field" 
                            placeholder="è¯·è¾“å…¥èº«é«˜" 
                            min="50" 
                            max="300" 
                            step="0.1"
                        >
                        <select id="heightUnit" class="unit-selector">
                            <option value="cm">å˜ç±³(cm)</option>
                            <option value="m">ç±³(m)</option>
                        </select>
                    </div>
                    <div class="error-message" id="heightError">è¯·è¾“å…¥æœ‰æ•ˆçš„èº«é«˜å€¼</div>
                </div>

                <!-- ä½“é‡è¾“å…¥ -->
                <div class="input-group">
                    <label class="input-label" for="weight">ä½“é‡</label>
                    <div class="input-wrapper">
                        <input 
                            type="number" 
                            id="weight" 
                            class="input-field" 
                            placeholder="è¯·è¾“å…¥ä½“é‡ï¼ˆåƒå…‹ï¼‰" 
                            min="20" 
                            max="500" 
                            step="0.1"
                        >
                        <span style="margin-left: 10px; padding: 15px; color: var(--text-light);">åƒå…‹(kg)</span>
                    </div>
                    <div class="error-message" id="weightError">è¯·è¾“å…¥æœ‰æ•ˆçš„ä½“é‡å€¼</div>
                </div>

                <!-- è®¡ç®—æŒ‰é’® -->
                <button id="calculateBtn" class="calculate-btn">
                    <span id="btnText">è®¡ç®—BMIæŒ‡æ•°</span>
                    <span id="btnLoading" class="loading" style="display: none;"></span>
                </button>
            </div>

            <!-- ç»“æœåŒºåŸŸ -->
            <div class="result-section">
                <div class="section-title">
                    <span>ğŸ“ˆ</span>
                    <span>BMIè®¡ç®—ç»“æœ</span>
                </div>

                <!-- BMIæ˜¾ç¤º -->
                <div class="bmi-display" id="bmiDisplay">
                    <div class="bmi-value" id="bmiValue">--</div>
                    <div class="bmi-category" id="bmiCategory">è¯·è¾“å…¥æ•°æ®è¿›è¡Œè®¡ç®—</div>
                    <div class="bmi-description" id="bmiDescription">BMI = ä½“é‡(kg) Ã· èº«é«˜Â²(m)</div>
                </div>

                <!-- BMIå›¾è¡¨ -->
                <div class="bmi-chart">
                    <div class="chart-title">BMIå¥åº·èŒƒå›´å›¾è¡¨</div>
                    <div class="chart-container">
                        <div class="chart-bar">
                            <div class="chart-indicator" id="chartIndicator"></div>
                        </div>
                        <div class="chart-labels">
                            <span>åç˜¦</span>
                            <span>æ­£å¸¸</span>
                            <span>è¿‡é‡</span>
                            <span>è‚¥èƒ–</span>
                        </div>
                        <div class="chart-ranges">
                            <div class="range-item underweight">
                                <div style="font-weight: 600;">åç˜¦</div>
                                <div>&lt; 18.5</div>
                            </div>
                            <div class="range-item normal">
                                <div style="font-weight: 600;">æ­£å¸¸</div>
                                <div>18.5 - 24.9</div>
                            </div>
                            <div class="range-item overweight">
                                <div style="font-weight: 600;">è¿‡é‡</div>
                                <div>25.0 - 29.9</div>
                            </div>
                            <div class="range-item obese">
                                <div style="font-weight: 600;">è‚¥èƒ–</div>
                                <div>â‰¥ 30.0</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- å¥åº·å»ºè®®åŒºåŸŸ -->
        <div class="advice-section">
            <div class="advice-title">
                <span>ğŸ’¡</span>
                <span>ä¸ªæ€§åŒ–å¥åº·å»ºè®®</span>
            </div>
            
            <!-- åç˜¦å»ºè®® -->
            <div class="advice-content" id="underweightAdvice">
                <ul class="advice-list">
                    <li><span class="advice-icon">ğŸ½ï¸</span> å¢åŠ è¥å…»æ‘„å…¥ï¼Œå¤šåƒå¯Œå«è›‹ç™½è´¨å’Œå¥åº·è„‚è‚ªçš„é£Ÿç‰©</li>
                    <li><span class="advice-icon">ğŸ’ª</span> è¿›è¡ŒåŠ›é‡è®­ç»ƒï¼Œå¸®åŠ©å¢åŠ è‚Œè‚‰é‡</li>
                    <li><span class="advice-icon">ğŸ¥›</span> é€‚é‡å¢åŠ é¤æ¬¡ï¼Œå¯ä»¥è€ƒè™‘å¥åº·çš„åŠ é¤</li>
                    <li><span class="advice-icon">ğŸ‘¨â€âš•ï¸</span> å¦‚æœä½“é‡æŒç»­åä½ï¼Œå»ºè®®å’¨è¯¢åŒ»ç”Ÿæˆ–è¥å…»å¸ˆ</li>
                </ul>
            </div>

            <!-- æ­£å¸¸å»ºè®® -->
            <div class="advice-content" id="normalAdvice">
                <ul class="advice-list">
                    <li><span class="advice-icon">ğŸ‰</span> æ­å–œï¼æ‚¨çš„BMIåœ¨å¥åº·èŒƒå›´å†…</li>
                    <li><span class="advice-icon">ğŸ¥—</span> ä¿æŒå‡è¡¡é¥®é£Ÿï¼Œå¤šåƒè”¬èœæ°´æœ</li>
                    <li><span class="advice-icon">ğŸƒâ€â™‚ï¸</span> ç»´æŒè§„å¾‹è¿åŠ¨ï¼Œæ¯å‘¨è‡³å°‘150åˆ†é’Ÿä¸­ç­‰å¼ºåº¦è¿åŠ¨</li>
                    <li><span class="advice-icon">ğŸ˜´</span> ä¿è¯å……è¶³ç¡çœ ï¼Œç»´æŒè‰¯å¥½çš„ç”Ÿæ´»ä¹ æƒ¯</li>
                </ul>
            </div>

            <!-- è¿‡é‡å»ºè®® -->
            <div class="advice-content" id="overweightAdvice">
                <ul class="advice-list">
                    <li><span class="advice-icon">ğŸ¯</span> å»ºè®®é€‚åº¦å‡é‡ï¼Œç›®æ ‡æ˜¯æ¯å‘¨å‡é‡0.5-1å…¬æ–¤</li>
                    <li><span class="advice-icon">ğŸ¥¬</span> æ§åˆ¶é¥®é£Ÿçƒ­é‡ï¼Œå¢åŠ è”¬èœå’Œçº¤ç»´æ‘„å…¥</li>
                    <li><span class="advice-icon">ğŸš¶â€â™€ï¸</span> å¢åŠ æœ‰æ°§è¿åŠ¨ï¼Œå¦‚å¿«èµ°ã€æ¸¸æ³³ã€éª‘è½¦ç­‰</li>
                    <li><span class="advice-icon">ğŸ“Š</span> å®šæœŸç›‘æµ‹ä½“é‡å˜åŒ–ï¼Œåˆ¶å®šåˆç†çš„å‡é‡è®¡åˆ’</li>
                </ul>
            </div>

            <!-- è‚¥èƒ–å»ºè®® -->
            <div class="advice-content" id="obeseAdvice">
                <ul class="advice-list">
                    <li><span class="advice-icon">âš ï¸</span> å»ºè®®å°½å¿«å¼€å§‹å‡é‡è®¡åˆ’ï¼Œé™ä½å¥åº·é£é™©</li>
                    <li><span class="advice-icon">ğŸ‘¨â€âš•ï¸</span> å¼ºçƒˆå»ºè®®å’¨è¯¢åŒ»ç”Ÿæˆ–ä¸“ä¸šè¥å…»å¸ˆ</li>
                    <li><span class="advice-icon">ğŸ</span> ä¸¥æ ¼æ§åˆ¶é¥®é£Ÿï¼Œå‡å°‘é«˜çƒ­é‡é£Ÿç‰©æ‘„å…¥</li>
                    <li><span class="advice-icon">ğŸ‹ï¸â€â™‚ï¸</span> å¾ªåºæ¸è¿›åœ°å¢åŠ è¿åŠ¨é‡ï¼Œé¿å…è¿‡åº¦è¿åŠ¨</li>
                    <li><span class="advice-icon">ğŸ©º</span> å®šæœŸä½“æ£€ï¼Œç›‘æµ‹è¡€å‹ã€è¡€ç³–ç­‰å¥åº·æŒ‡æ ‡</li>
                </ul>
            </div>
        </div>

        <!-- å‚è€ƒä¿¡æ¯åŒºåŸŸ -->
        <div class="reference-section">
            <div class="section-title">
                <span>ğŸ“š</span>
                <span>BMIå‚è€ƒä¿¡æ¯</span>
            </div>
            
            <div class="reference-grid">
                <div class="reference-card">
                    <h4>ğŸ” ä»€ä¹ˆæ˜¯BMIï¼Ÿ</h4>
                    <p>BMIï¼ˆBody Mass Indexï¼‰æ˜¯èº«ä½“è´¨é‡æŒ‡æ•°ï¼Œæ˜¯ç›®å‰å›½é™…ä¸Šå¸¸ç”¨çš„è¡¡é‡äººä½“èƒ–ç˜¦ç¨‹åº¦ä»¥åŠæ˜¯å¦å¥åº·çš„é‡è¦æ ‡å‡†ã€‚è®¡ç®—å…¬å¼ä¸ºï¼šä½“é‡(kg) Ã· èº«é«˜Â²(m)ã€‚</p>
                </div>
                
                <div class="reference-card">
                    <h4>âš–ï¸ BMIçš„å±€é™æ€§</h4>
                    <p>BMIä¸èƒ½åŒºåˆ†è‚Œè‚‰å’Œè„‚è‚ªçš„é‡é‡ï¼Œå¯¹äºè‚Œè‚‰å‘è¾¾çš„è¿åŠ¨å‘˜å¯èƒ½ä¸å¤Ÿå‡†ç¡®ã€‚åŒæ—¶ï¼Œä¸åŒå¹´é¾„ã€æ€§åˆ«å’Œç§æ—çš„æ ‡å‡†å¯èƒ½æœ‰æ‰€å·®å¼‚ã€‚</p>
                </div>
                
                <div class="reference-card">
                    <h4>ğŸ¯ å¥åº·ç›®æ ‡</h4>
                    <p>ç»´æŒå¥åº·çš„BMIèŒƒå›´ï¼ˆ18.5-24.9ï¼‰æœ‰åŠ©äºé™ä½å¿ƒè¡€ç®¡ç–¾ç—…ã€ç³–å°¿ç—…ç­‰æ…¢æ€§ç–¾ç—…çš„é£é™©ã€‚ä½†å¥åº·ä¸ä»…ä»…çœ‹BMIï¼Œè¿˜è¦è€ƒè™‘æ•´ä½“ç”Ÿæ´»æ–¹å¼ã€‚</p>
                </div>
                
                <div class="reference-card">
                    <h4>ğŸ“ˆ ç›‘æµ‹å»ºè®®</h4>
                    <p>å»ºè®®å®šæœŸæµ‹é‡èº«é«˜ä½“é‡ï¼Œç›‘æµ‹BMIå˜åŒ–è¶‹åŠ¿ã€‚å¦‚æœBMIè¶…å‡ºæ­£å¸¸èŒƒå›´ï¼Œåº”åŠæ—¶è°ƒæ•´é¥®é£Ÿå’Œè¿åŠ¨ä¹ æƒ¯ï¼Œå¿…è¦æ—¶å¯»æ±‚ä¸“ä¸šæŒ‡å¯¼ã€‚</p>
                </div>
            </div>
        </div>
    </div>

    <!-- çŠ¶æ€æç¤º -->
    <div id="statusMessage" class="status-message"></div>

    <script>
        // DOMå…ƒç´ 
        const heightInput = document.getElementById('height');
        const weightInput = document.getElementById('weight');
        const heightUnit = document.getElementById('heightUnit');
        const calculateBtn = document.getElementById('calculateBtn');
        const btnText = document.getElementById('btnText');
        const btnLoading = document.getElementById('btnLoading');
        const bmiValue = document.getElementById('bmiValue');
        const bmiCategory = document.getElementById('bmiCategory');
        const bmiDescription = document.getElementById('bmiDescription');
        const chartIndicator = document.getElementById('chartIndicator');
        const statusMessage = document.getElementById('statusMessage');
        
        // é”™è¯¯æç¤ºå…ƒç´ 
        const heightError = document.getElementById('heightError');
        const weightError = document.getElementById('weightError');
        
        // å»ºè®®å†…å®¹å…ƒç´ 
        const adviceContents = {
            underweight: document.getElementById('underweightAdvice'),
            normal: document.getElementById('normalAdvice'),
            overweight: document.getElementById('overweightAdvice'),
            obese: document.getElementById('obeseAdvice')
        };

        // BMIåˆ†ç±»å®šä¹‰
        const bmiCategories = {
            underweight: {
                range: [0, 18.5],
                name: 'åç˜¦',
                class: 'underweight',
                description: 'ä½“é‡åè½»ï¼Œå»ºè®®å¢åŠ è¥å…»æ‘„å…¥',
                advice: 'underweight'
            },
            normal: {
                range: [18.5, 25],
                name: 'æ­£å¸¸',
                class: 'normal',
                description: 'ä½“é‡æ­£å¸¸ï¼Œè¯·ä¿æŒå¥åº·çš„ç”Ÿæ´»æ–¹å¼',
                advice: 'normal'
            },
            overweight: {
                range: [25, 30],
                name: 'è¿‡é‡',
                class: 'overweight',
                description: 'ä½“é‡åé‡ï¼Œå»ºè®®é€‚åº¦å‡é‡',
                advice: 'overweight'
            },
            obese: {
                range: [30, Infinity],
                name: 'è‚¥èƒ–',
                class: 'obese',
                description: 'ä½“é‡è¿‡é‡ï¼Œå»ºè®®å°½å¿«å‡é‡å¹¶å’¨è¯¢åŒ»ç”Ÿ',
                advice: 'obese'
            }
        };

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            loadSavedData();
            setupEventListeners();
        });

        // è®¾ç½®äº‹ä»¶ç›‘å¬å™¨
        function setupEventListeners() {
            // è¾“å…¥éªŒè¯
            heightInput.addEventListener('input', validateHeight);
            weightInput.addEventListener('input', validateWeight);
            heightInput.addEventListener('blur', validateHeight);
            weightInput.addEventListener('blur', validateWeight);
            
            // è®¡ç®—æŒ‰é’®
            calculateBtn.addEventListener('click', calculateBMI);
            
            // å›è½¦é”®è®¡ç®—
            [heightInput, weightInput].forEach(input => {
                input.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        calculateBMI();
                    }
                });
            });
            
            // å•ä½å˜åŒ–æ—¶é‡æ–°éªŒè¯
            heightUnit.addEventListener('change', validateHeight);
            
            // å®æ—¶ä¿å­˜æ•°æ®
            heightInput.addEventListener('input', saveData);
            weightInput.addEventListener('input', saveData);
            heightUnit.addEventListener('change', saveData);
        }

        // æ˜¾ç¤ºçŠ¶æ€æ¶ˆæ¯
        function showStatus(message, type = 'info') {
            statusMessage.textContent = message;
            statusMessage.className = `status-message ${type} show`;
            setTimeout(() => {
                statusMessage.classList.remove('show');
            }, 3000);
        }

        // éªŒè¯èº«é«˜
        function validateHeight() {
            const height = parseFloat(heightInput.value);
            const unit = heightUnit.value;
            let isValid = true;
            let errorMsg = '';
            
            if (!height || isNaN(height)) {
                isValid = false;
                errorMsg = 'è¯·è¾“å…¥æœ‰æ•ˆçš„èº«é«˜å€¼';
            } else if (unit === 'cm' && (height < 50 || height > 300)) {
                isValid = false;
                errorMsg = 'èº«é«˜åº”åœ¨50-300å˜ç±³ä¹‹é—´';
            } else if (unit === 'm' && (height < 0.5 || height > 3)) {
                isValid = false;
                errorMsg = 'èº«é«˜åº”åœ¨0.5-3ç±³ä¹‹é—´';
            }
            
            updateFieldValidation(heightInput, heightError, isValid, errorMsg);
            return isValid;
        }

        // éªŒè¯ä½“é‡
        function validateWeight() {
            const weight = parseFloat(weightInput.value);
            let isValid = true;
            let errorMsg = '';
            
            if (!weight || isNaN(weight)) {
                isValid = false;
                errorMsg = 'è¯·è¾“å…¥æœ‰æ•ˆçš„ä½“é‡å€¼';
            } else if (weight < 20 || weight > 500) {
                isValid = false;
                errorMsg = 'ä½“é‡åº”åœ¨20-500åƒå…‹ä¹‹é—´';
            }
            
            updateFieldValidation(weightInput, weightError, isValid, errorMsg);
            return isValid;
        }

        // æ›´æ–°å­—æ®µéªŒè¯çŠ¶æ€
        function updateFieldValidation(field, errorElement, isValid, errorMsg) {
            if (isValid) {
                field.classList.remove('error');
                errorElement.style.display = 'none';
            } else {
                field.classList.add('error');
                errorElement.textContent = errorMsg;
                errorElement.style.display = 'block';
            }
        }

        // è®¡ç®—BMI
        function calculateBMI() {
            // éªŒè¯è¾“å…¥
            const isHeightValid = validateHeight();
            const isWeightValid = validateWeight();
            
            if (!isHeightValid || !isWeightValid) {
                showStatus('è¯·æ£€æŸ¥è¾“å…¥æ•°æ®', 'error');
                return;
            }
            
            // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
            showLoading(true);
            
            // æ¨¡æ‹Ÿè®¡ç®—å»¶è¿Ÿï¼ˆå¢å¼ºç”¨æˆ·ä½“éªŒï¼‰
            setTimeout(() => {
                try {
                    // è·å–è¾“å…¥å€¼
                    let height = parseFloat(heightInput.value);
                    const weight = parseFloat(weightInput.value);
                    const unit = heightUnit.value;
                    
                    // è½¬æ¢èº«é«˜ä¸ºç±³
                    if (unit === 'cm') {
                        height = height / 100;
                    }
                    
                    // è®¡ç®—BMI
                    const bmi = weight / (height * height);
                    
                    // æ˜¾ç¤ºç»“æœ
                    displayBMIResult(bmi);
                    
                    // ä¿å­˜æ•°æ®
                    saveData();
                    
                    showStatus('BMIè®¡ç®—å®Œæˆï¼', 'success');
                } catch (error) {
                    showStatus('è®¡ç®—è¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯', 'error');
                } finally {
                    showLoading(false);
                }
            }, 500);
        }

        // æ˜¾ç¤ºBMIç»“æœ
        function displayBMIResult(bmi) {
            // æ›´æ–°BMIæ•°å€¼
            bmiValue.textContent = bmi.toFixed(1);
            
            // ç¡®å®šBMIåˆ†ç±»
            let category = null;
            for (const [key, cat] of Object.entries(bmiCategories)) {
                if (bmi >= cat.range[0] && bmi < cat.range[1]) {
                    category = cat;
                    break;
                }
            }
            
            if (category) {
                // æ›´æ–°åˆ†ç±»æ˜¾ç¤º
                bmiCategory.textContent = category.name;
                bmiCategory.className = `bmi-category ${category.class}`;
                bmiDescription.textContent = category.description;
                
                // æ›´æ–°å›¾è¡¨æŒ‡ç¤ºå™¨
                updateChartIndicator(bmi);
                
                // æ˜¾ç¤ºå¯¹åº”å»ºè®®
                showAdvice(category.advice);
            }
        }

        // æ›´æ–°å›¾è¡¨æŒ‡ç¤ºå™¨
        function updateChartIndicator(bmi) {
            // è®¡ç®—æŒ‡ç¤ºå™¨ä½ç½®ï¼ˆåŸºäºBMIå€¼ï¼‰
            let position = 0;
            
            if (bmi < 18.5) {
                // åç˜¦åŒºåŸŸ (0-18.5%)
                position = (bmi / 18.5) * 18.5;
            } else if (bmi < 25) {
                // æ­£å¸¸åŒºåŸŸ (18.5-25%)
                position = 18.5 + ((bmi - 18.5) / (25 - 18.5)) * (25 - 18.5);
            } else if (bmi < 30) {
                // è¿‡é‡åŒºåŸŸ (25-30%)
                position = 25 + ((bmi - 25) / (30 - 25)) * (30 - 25);
            } else {
                // è‚¥èƒ–åŒºåŸŸ (30-100%)
                position = Math.min(30 + ((bmi - 30) / 20) * 70, 95); // é™åˆ¶åœ¨95%ä»¥å†…
            }
            
            chartIndicator.style.left = `${position}%`;
            chartIndicator.classList.add('show');
        }

        // æ˜¾ç¤ºå¥åº·å»ºè®®
        function showAdvice(adviceType) {
            // éšè—æ‰€æœ‰å»ºè®®
            Object.values(adviceContents).forEach(content => {
                content.classList.remove('show');
            });
            
            // æ˜¾ç¤ºå¯¹åº”å»ºè®®
            if (adviceContents[adviceType]) {
                adviceContents[adviceType].classList.add('show');
            }
        }

        // æ˜¾ç¤º/éšè—åŠ è½½çŠ¶æ€
        function showLoading(isLoading) {
            if (isLoading) {
                btnText.style.display = 'none';
                btnLoading.style.display = 'inline-block';
                calculateBtn.disabled = true;
            } else {
                btnText.style.display = 'inline';
                btnLoading.style.display = 'none';
                calculateBtn.disabled = false;
            }
        }

        // ä¿å­˜æ•°æ®åˆ°æœ¬åœ°å­˜å‚¨
        function saveData() {
            const data = {
                height: heightInput.value,
                weight: weightInput.value,
                heightUnit: heightUnit.value
            };
            localStorage.setItem('bmiCalculatorData', JSON.stringify(data));
        }

        // åŠ è½½ä¿å­˜çš„æ•°æ®
        function loadSavedData() {
            try {
                const saved = localStorage.getItem('bmiCalculatorData');
                if (saved) {
                    const data = JSON.parse(saved);
                    heightInput.value = data.height || '';
                    weightInput.value = data.weight || '';
                    heightUnit.value = data.heightUnit || 'cm';
                }
            } catch (e) {
                console.warn('åŠ è½½ä¿å­˜æ•°æ®å¤±è´¥:', e);
            }
        }

        // é”®ç›˜å¿«æ·é”®
        document.addEventListener('keydown', (e) => {
            // Ctrl+Enter è®¡ç®—BMI
            if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') {
                e.preventDefault();
                calculateBMI();
            }
            
            // Escape æ¸…ç©ºè¾“å…¥
            if (e.key === 'Escape') {
                if (confirm('ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰è¾“å…¥å—ï¼Ÿ')) {
                    heightInput.value = '';
                    weightInput.value = '';
                    bmiValue.textContent = '--';
                    bmiCategory.textContent = 'è¯·è¾“å…¥æ•°æ®è¿›è¡Œè®¡ç®—';
                    bmiCategory.className = 'bmi-category';
                    bmiDescription.textContent = 'BMI = ä½“é‡(kg) Ã· èº«é«˜Â²(m)';
                    chartIndicator.classList.remove('show');
                    Object.values(adviceContents).forEach(content => {
                        content.classList.remove('show');
                    });
                    localStorage.removeItem('bmiCalculatorData');
                    showStatus('æ•°æ®å·²æ¸…ç©º', 'info');
                }
            }
        });

        // é˜²æ­¢é¡µé¢æ„å¤–åˆ·æ–°æ—¶ä¸¢å¤±æ•°æ®
        window.addEventListener('beforeunload', (e) => {
            if (heightInput.value.trim() || weightInput.value.trim()) {
                e.preventDefault();
                e.returnValue = 'æ‚¨æœ‰æœªä¿å­˜çš„æ•°æ®ï¼Œç¡®å®šè¦ç¦»å¼€å—ï¼Ÿ';
            }
        });

        // é¡µé¢èšç„¦æ—¶è‡ªåŠ¨èšç„¦åˆ°ç¬¬ä¸€ä¸ªè¾“å…¥æ¡†
        window.addEventListener('focus', () => {
            if (!heightInput.value.trim()) {
                heightInput.focus();
            }
        });

        // æ·»åŠ æŒ‰é’®ç‚¹å‡»åŠ¨ç”»æ•ˆæœ
        function addRippleEffect(button, event) {
            const rect = button.getBoundingClientRect();
            const size = Math.max(rect.width, rect.height);
            const x = event.clientX - rect.left - size / 2;
            const y = event.clientY - rect.top - size / 2;
            
            const ripple = document.createElement('div');
            ripple.style.cssText = `
                position: absolute;
                width: ${size}px;
                height: ${size}px;
                left: ${x}px;
                top: ${y}px;
                background: rgba(255, 255, 255, 0.5);
                border-radius: 50%;
                transform: scale(0);
                animation: ripple 0.6s linear;
                pointer-events: none;
            `;
            
            button.style.position = 'relative';
            button.style.overflow = 'hidden';
            button.appendChild(ripple);
            
            setTimeout(() => {
                ripple.remove();
            }, 600);
        }

        // ä¸ºè®¡ç®—æŒ‰é’®æ·»åŠ æ³¢çº¹æ•ˆæœ
        calculateBtn.addEventListener('click', (e) => {
            addRippleEffect(calculateBtn, e);
        });

        // æ·»åŠ CSSåŠ¨ç”»
        const style = document.createElement('style');
        style.textContent = `
            @keyframes ripple {
                to {
                    transform: scale(4);
                    opacity: 0;
                }
            }
        `;
        document.head.appendChild(style);

        // è‡ªåŠ¨è®¡ç®—åŠŸèƒ½ï¼ˆå¯é€‰ï¼‰
        let autoCalculateTimeout;
        function setupAutoCalculate() {
            [heightInput, weightInput, heightUnit].forEach(element => {
                element.addEventListener('input', () => {
                    clearTimeout(autoCalculateTimeout);
                    autoCalculateTimeout = setTimeout(() => {
                        if (validateHeight() && validateWeight()) {
                            calculateBMI();
                        }
                    }, 1000); // 1ç§’åè‡ªåŠ¨è®¡ç®—
                });
            });
        }

        // å¯ç”¨è‡ªåŠ¨è®¡ç®—ï¼ˆå¯é€‰åŠŸèƒ½ï¼‰
        // setupAutoCalculate();
    </script>
</body>
</html>