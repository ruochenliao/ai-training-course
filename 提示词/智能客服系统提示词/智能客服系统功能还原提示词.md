# 智能客服系统功能还原提示词

## 项目概述

智能客服系统是一个基于 AutoGen 多智能体框架构建的现代化客服解决方案，支持多模态交互（文本+图片）、用户记忆管理、会话持久化等功能。系统采用前后端分离架构，前端使用 Next.js + React，后端使用 FastAPI + Python。

## 技术栈

### 前端技术栈
- **框架**: Next.js 14 + React 18
- **UI组件**: Tailwind CSS + Lucide React Icons
- **动画**: Framer Motion
- **Markdown渲染**: ReactMarkdown + Prism.js
- **状态管理**: React Hooks (useState, useEffect, useRef)
- **HTTP客户端**: Fetch API

### 后端技术栈
- **框架**: FastAPI + Python 3.9+
- **AI框架**: AutoGen AgentChat 0.5.6+
- **LLM客户端**: OpenAI Compatible API
- **数据存储**: SQLite + 文件系统
- **记忆管理**: 向量数据库 + 持久化存储
- **图片处理**: PIL (Pillow)

## 核心功能模块

### 1. 智能对话引擎
- 基于 AutoGen AssistantAgent 的智能对话
- 支持流式响应生成
- 多模态消息处理（文本+图片）
- 工具调用能力（商品查询、订单管理等）

### 2. 用户记忆系统
- **聊天记忆**: 存储用户对话历史
- **私有记忆**: 用户个人知识库
- **公共记忆**: 共享知识库
- 支持向量检索和语义搜索

### 3. 会话管理
- 多用户会话隔离
- 会话持久化存储
- 会话历史恢复
- 会话状态管理

### 4. 多模态支持
- 图片上传和处理
- 图片理解和分析
- 多模态消息格式
- 任务类型识别

### 5. 客服工具集成
- 商品搜索和详情查询
- 订单状态查询和管理
- 促销活动查询
- 政策信息查询
- 退货申请处理
- 用户反馈收集

## 系统架构

```
智能客服系统
├── 前端应用 (Next.js)
│   ├── 客服聊天界面
│   ├── 消息渲染组件
│   ├── 图片上传组件
│   └── API 客户端
├── 后端服务 (FastAPI)
│   ├── 聊天API路由
│   ├── 会话管理API
│   ├── 图片上传API
│   └── 静态文件服务
├── 智能对话引擎
│   ├── ChatService (聊天服务)
│   ├── AssistantAgent (AI助手)
│   ├── 工具函数集合
│   └── 多模态消息处理
├── 记忆管理系统
│   ├── ChatMemoryService (聊天记忆)
│   ├── PrivateMemoryService (私有记忆)
│   ├── PublicMemoryService (公共记忆)
│   └── MemoryServiceFactory (记忆工厂)
├── 会话管理系统
│   ├── SessionService (会话服务)
│   ├── 会话持久化
│   └── 用户隔离
└── 数据存储层
    ├── SQLite 数据库
    ├── 文件系统存储
    └── 向量数据库
```

## 关键特性

1. **流式响应**: 实时生成和显示AI回复
2. **多模态交互**: 支持文本和图片的混合输入
3. **记忆持久化**: 用户对话和知识的长期存储
4. **工具调用**: 集成业务系统API
5. **会话管理**: 多会话并行处理
6. **用户隔离**: 多用户数据安全隔离
7. **响应式UI**: 现代化的用户界面
8. **错误处理**: 完善的异常处理机制

## 部署要求

### 环境依赖
- Python 3.9+
- Node.js 18+
- SQLite 3
- OpenAI Compatible LLM API

### 配置文件
- 后端环境变量配置
- 前端环境变量配置
- LLM模型配置
- 数据库连接配置

## 扩展能力

1. **多语言支持**: 国际化框架集成
2. **插件系统**: 工具函数动态加载
3. **监控告警**: 系统运行状态监控
4. **负载均衡**: 多实例部署支持
5. **数据分析**: 用户行为分析
6. **安全认证**: 用户身份验证

---

本文档为智能客服系统的总体功能还原提示词，详细的子功能还原提示词请参考对应的专项文档。