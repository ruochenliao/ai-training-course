# ä¼ä¸šçº§RAGçŸ¥è¯†åº“ç³»ç»Ÿ API æ€»è§ˆ

## ğŸ“‹ ç³»ç»Ÿæ¦‚è¿°

ä¼ä¸šçº§Agent+RAGçŸ¥è¯†åº“ç³»ç»Ÿæ˜¯åŸºäºå¤šæ™ºèƒ½ä½“åä½œçš„ä¼ä¸šçº§çŸ¥è¯†åº“ç³»ç»Ÿï¼Œæä¾›å®Œæ•´çš„çŸ¥è¯†ç®¡ç†ã€æ™ºèƒ½é—®ç­”ã€æ–‡æ¡£å¤„ç†å’Œæƒé™ç®¡ç†åŠŸèƒ½ã€‚

## ğŸ—ï¸ APIæ¶æ„è®¾è®¡

### åŸºç¡€ä¿¡æ¯
- **APIç‰ˆæœ¬**: v1
- **åŸºç¡€è·¯å¾„**: `/api/v1`
- **è¯·æ±‚æ ¼å¼**: JSON
- **å“åº”æ ¼å¼**: JSON
- **å­—ç¬¦ç¼–ç **: UTF-8
- **æ—¶é—´æ ¼å¼**: ISO 8601 (YYYY-MM-DDTHH:mm:ssZ)

### è®¤è¯æ–¹å¼
- **è®¤è¯ç±»å‹**: JWT Bearer Token
- **Tokenè·å–**: POST `/api/v1/auth/login`
- **Tokenåˆ·æ–°**: POST `/api/v1/auth/refresh`
- **æƒé™æ§åˆ¶**: åŸºäºRBACæƒé™æ¨¡å‹

### ç»Ÿä¸€å“åº”æ ¼å¼
```json
{
  "success": true,
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {},
  "timestamp": "2024-01-01T12:00:00Z"
}
```

## ğŸ“š APIæ¨¡å—æ¦‚è§ˆ

### 1. è®¤è¯æ¨¡å— (`/auth`)
- ç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€ç™»å‡º
- JWTä»¤ç‰Œç®¡ç†
- å¯†ç é‡ç½®

### 2. ç”¨æˆ·ç®¡ç† (`/users`)
- ç”¨æˆ·ä¿¡æ¯CRUD
- ç”¨æˆ·æƒé™ç®¡ç†
- ç”¨æˆ·çŠ¶æ€æ§åˆ¶

### 3. çŸ¥è¯†åº“ç®¡ç† (`/knowledge-bases`)
- çŸ¥è¯†åº“åˆ›å»ºã€æŸ¥è¯¢ã€æ›´æ–°ã€åˆ é™¤
- çŸ¥è¯†åº“æƒé™æ§åˆ¶
- çŸ¥è¯†åº“ç»Ÿè®¡ä¿¡æ¯

### 4. æ–‡æ¡£ç®¡ç† (`/documents`)
- æ–‡æ¡£ä¸Šä¼ ã€å¤„ç†
- æ–‡æ¡£æŸ¥è¯¢ã€ä¸‹è½½
- æ–‡æ¡£å…ƒæ•°æ®ç®¡ç†

### 5. å¯¹è¯ç®¡ç† (`/conversations`)
- å¯¹è¯åˆ›å»ºã€æŸ¥è¯¢
- æ¶ˆæ¯å†å²ç®¡ç†
- å¯¹è¯ä¸Šä¸‹æ–‡ç»´æŠ¤

### 6. èŠå¤©æ¥å£ (`/chat`)
- å®æ—¶èŠå¤©
- æµå¼èŠå¤©
- å¤šæ¨¡æ€å¯¹è¯

### 7. æœç´¢æ¥å£ (`/search`)
- å‘é‡æœç´¢
- å›¾è°±æœç´¢
- æ··åˆæœç´¢

### 8. å¤šæ™ºèƒ½ä½“åä½œ (`/autogen`)
- AutoGenå¤šæ™ºèƒ½ä½“èŠå¤©
- æ™ºèƒ½ä½“åä½œé…ç½®
- ä»»åŠ¡åˆ†å‘ä¸æ‰§è¡Œ

### 9. æƒé™ç®¡ç† (`/rbac`)
- è§’è‰²æƒé™ç®¡ç†
- éƒ¨é—¨ç®¡ç†
- æƒé™æ£€æŸ¥

### 10. ç³»ç»Ÿç®¡ç† (`/system`, `/admin`)
- ç³»ç»Ÿä¿¡æ¯æŸ¥è¯¢
- å¥åº·æ£€æŸ¥
- ç³»ç»Ÿé…ç½®

### 11. ç›‘æ§ç®¡ç† (`/monitoring`, `/dashboard`)
- ç³»ç»Ÿç›‘æ§
- æ€§èƒ½æŒ‡æ ‡
- ç›‘æ§ä»ªè¡¨æ¿

### 12. é«˜çº§åŠŸèƒ½
- é«˜çº§æœç´¢ (`/advanced-search`)
- çŸ¥è¯†å›¾è°± (`/graph`)
- ç¼“å­˜ç®¡ç† (`/cache`)
- æ–‡ä»¶ä¸Šä¼  (`/upload`)

## ğŸ”— å¿«é€Ÿå¯¼èˆª

| æ¨¡å— | æ–‡æ¡£é“¾æ¥ | ä¸»è¦åŠŸèƒ½ |
|------|----------|----------|
| è®¤è¯æ¨¡å— | [api-auth.md](./api-auth.md) | ç”¨æˆ·è®¤è¯ã€æˆæƒ |
| ç”¨æˆ·ç®¡ç† | [api-users.md](./api-users.md) | ç”¨æˆ·CRUDã€æƒé™ |
| çŸ¥è¯†åº“ç®¡ç† | [api-knowledge-bases.md](./api-knowledge-bases.md) | çŸ¥è¯†åº“ç®¡ç† |
| æ–‡æ¡£ç®¡ç† | [api-documents.md](./api-documents.md) | æ–‡æ¡£å¤„ç†ã€å­˜å‚¨ |
| å¯¹è¯ç®¡ç† | [api-conversations.md](./api-conversations.md) | å¯¹è¯å†å²ç®¡ç† |
| èŠå¤©æ¥å£ | [api-chat.md](./api-chat.md) | æ™ºèƒ½é—®ç­” |
| æœç´¢æ¥å£ | [api-search.md](./api-search.md) | å¤šç§æœç´¢æ–¹å¼ |
| å¤šæ™ºèƒ½ä½“ | [api-autogen.md](./api-autogen.md) | æ™ºèƒ½ä½“åä½œ |
| æƒé™ç®¡ç† | [api-rbac.md](./api-rbac.md) | RBACæƒé™ç³»ç»Ÿ |
| ç³»ç»Ÿç®¡ç† | [api-system.md](./api-system.md) | ç³»ç»Ÿä¿¡æ¯ã€ç›‘æ§ |

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. è·å–è®¿é—®ä»¤ç‰Œ
```bash
curl -X POST "http://localhost:8000/api/v1/auth/login" \
  -H "Content-Type: application/json" \
  -d '{
    "username": "admin",
    "password": "password"
  }'
```

### 2. ä½¿ç”¨ä»¤ç‰Œè®¿é—®API
```bash
curl -X GET "http://localhost:8000/api/v1/users/me" \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN"
```

### 3. åˆ›å»ºçŸ¥è¯†åº“
```bash
curl -X POST "http://localhost:8000/api/v1/knowledge-bases" \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "æˆ‘çš„çŸ¥è¯†åº“",
    "description": "æµ‹è¯•çŸ¥è¯†åº“",
    "is_public": false
  }'
```

## ğŸ“– æ–‡æ¡£è¯´æ˜

æ¯ä¸ªAPIæ¨¡å—çš„è¯¦ç»†æ–‡æ¡£åŒ…å«ï¼š
- æ¥å£åˆ—è¡¨å’ŒåŸºæœ¬ä¿¡æ¯
- è¯·æ±‚å‚æ•°è¯¦ç»†è¯´æ˜
- å“åº”æ ¼å¼å’Œå­—æ®µè¯´æ˜
- é”™è¯¯ç å’Œå¤„ç†æ–¹å¼
- å®Œæ•´çš„è¯·æ±‚ç¤ºä¾‹
- ä¸šåŠ¡æµç¨‹å›¾ï¼ˆå¦‚é€‚ç”¨ï¼‰

## ğŸ”§ å¼€å‘å·¥å…·

- **APIæ–‡æ¡£**: http://localhost:8000/docs (Swagger UI)
- **ReDocæ–‡æ¡£**: http://localhost:8000/redoc
- **å¥åº·æ£€æŸ¥**: http://localhost:8000/health
- **APIä¿¡æ¯**: http://localhost:8000/api/v1/

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·å‚è€ƒï¼š
1. å„æ¨¡å—çš„è¯¦ç»†APIæ–‡æ¡£
2. ç³»ç»Ÿæ¶æ„è®¾è®¡æ–‡æ¡£
3. RBACæƒé™ç³»ç»Ÿæ–‡æ¡£
4. æ™ºèƒ½RAGéœ€æ±‚æ–‡æ¡£
