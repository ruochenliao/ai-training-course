# ç”¨æˆ·ç®¡ç†æ¨¡å— API æ–‡æ¡£

## ğŸ“‹ æ¨¡å—æ¦‚è¿°

ç”¨æˆ·ç®¡ç†æ¨¡å—æä¾›ç”¨æˆ·ä¿¡æ¯çš„å¢åˆ æ”¹æŸ¥ã€ç”¨æˆ·çŠ¶æ€ç®¡ç†ã€ç”¨æˆ·ç»Ÿè®¡ç­‰åŠŸèƒ½ï¼Œæ”¯æŒæ™®é€šç”¨æˆ·è‡ªæˆ‘ç®¡ç†å’Œç®¡ç†å‘˜ç”¨æˆ·ç®¡ç†ã€‚

**åŸºç¡€è·¯å¾„**: `/api/v1/users`

## ğŸ” æƒé™è¯´æ˜

- **æ™®é€šç”¨æˆ·**: åªèƒ½è®¿é—®å’Œä¿®æ”¹è‡ªå·±çš„ä¿¡æ¯ (`/me` ç›¸å…³æ¥å£)
- **è¶…çº§ç”¨æˆ·**: å¯ä»¥ç®¡ç†æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯å’ŒçŠ¶æ€

## ğŸ“š æ¥å£åˆ—è¡¨

### 1. è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯

**æ¥å£åç§°**: è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯  
**åŠŸèƒ½æè¿°**: è·å–å½“å‰ç™»å½•ç”¨æˆ·çš„è¯¦ç»†ä¿¡æ¯  
**æ¥å£åœ°å€**: `/api/v1/users/me`  
**è¯·æ±‚æ–¹å¼**: GET  
**è®¤è¯**: éœ€è¦Bearer Token

#### è¯·æ±‚å‚æ•°
æ— 

#### å“åº”å‚æ•°
```json
{
  "id": 1,
  "username": "testuser",
  "email": "test@example.com",
  "full_name": "æµ‹è¯•ç”¨æˆ·",
  "avatar_url": null,
  "bio": "è¿™æ˜¯æˆ‘çš„ä¸ªäººç®€ä»‹",
  "phone": "13800138000",
  "is_email_verified": true,
  "is_phone_verified": false,
  "is_superuser": false,
  "is_staff": false,
  "status": "active",
  "language": "zh",
  "timezone": "Asia/Shanghai",
  "theme": "light",
  "created_at": "2024-01-01T12:00:00Z",
  "updated_at": "2024-01-01T12:00:00Z",
  "last_login_at": "2024-01-01T12:30:00Z",
  "login_count": 5
}
```

| å‚æ•°å | ç±»å‹ | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|-------|------|------|--------|
| id | int | ç”¨æˆ·ID | 1 |
| username | string | ç”¨æˆ·å | testuser |
| email | string | é‚®ç®±åœ°å€ | test@example.com |
| full_name | string | çœŸå®å§“å | æµ‹è¯•ç”¨æˆ· |
| avatar_url | string | å¤´åƒURL | null |
| bio | string | ä¸ªäººç®€ä»‹ | è¿™æ˜¯æˆ‘çš„ä¸ªäººç®€ä»‹ |
| phone | string | æ‰‹æœºå·ç  | 13800138000 |
| is_email_verified | bool | é‚®ç®±æ˜¯å¦éªŒè¯ | true |
| is_phone_verified | bool | æ‰‹æœºæ˜¯å¦éªŒè¯ | false |
| is_superuser | bool | æ˜¯å¦è¶…çº§ç”¨æˆ· | false |
| is_staff | bool | æ˜¯å¦å‘˜å·¥ | false |
| status | string | ç”¨æˆ·çŠ¶æ€ | active |
| language | string | è¯­è¨€è®¾ç½® | zh |
| timezone | string | æ—¶åŒºè®¾ç½® | Asia/Shanghai |
| theme | string | ä¸»é¢˜è®¾ç½® | light |
| created_at | string | åˆ›å»ºæ—¶é—´ | 2024-01-01T12:00:00Z |
| updated_at | string | æ›´æ–°æ—¶é—´ | 2024-01-01T12:00:00Z |
| last_login_at | string | æœ€åç™»å½•æ—¶é—´ | 2024-01-01T12:30:00Z |
| login_count | int | ç™»å½•æ¬¡æ•° | 5 |

---

### 2. æ›´æ–°å½“å‰ç”¨æˆ·ä¿¡æ¯

**æ¥å£åç§°**: æ›´æ–°å½“å‰ç”¨æˆ·ä¿¡æ¯  
**åŠŸèƒ½æè¿°**: æ›´æ–°å½“å‰ç™»å½•ç”¨æˆ·çš„ä¸ªäººä¿¡æ¯  
**æ¥å£åœ°å€**: `/api/v1/users/me`  
**è¯·æ±‚æ–¹å¼**: PUT  
**è®¤è¯**: éœ€è¦Bearer Token

#### è¯·æ±‚å‚æ•°
```json
{
  "full_name": "æ–°çš„å§“å",
  "bio": "æ›´æ–°çš„ä¸ªäººç®€ä»‹",
  "phone": "13900139000",
  "language": "en",
  "timezone": "UTC",
  "theme": "dark"
}
```

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|-------|------|-----|------|--------|
| full_name | string | å¦ | çœŸå®å§“å | æ–°çš„å§“å |
| bio | string | å¦ | ä¸ªäººç®€ä»‹ | æ›´æ–°çš„ä¸ªäººç®€ä»‹ |
| phone | string | å¦ | æ‰‹æœºå·ç  | 13900139000 |
| language | string | å¦ | è¯­è¨€è®¾ç½® | en |
| timezone | string | å¦ | æ—¶åŒºè®¾ç½® | UTC |
| theme | string | å¦ | ä¸»é¢˜è®¾ç½® | dark |

#### å“åº”å‚æ•°
è¿”å›æ›´æ–°åçš„ç”¨æˆ·ä¿¡æ¯ï¼Œæ ¼å¼åŒ"è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯"ã€‚

---

### 3. è·å–ç”¨æˆ·åˆ—è¡¨

**æ¥å£åç§°**: è·å–ç”¨æˆ·åˆ—è¡¨  
**åŠŸèƒ½æè¿°**: è·å–ç³»ç»Ÿä¸­æ‰€æœ‰ç”¨æˆ·çš„åˆ—è¡¨ï¼ˆä»…è¶…çº§ç”¨æˆ·ï¼‰  
**æ¥å£åœ°å€**: `/api/v1/users/`  
**è¯·æ±‚æ–¹å¼**: GET  
**è®¤è¯**: éœ€è¦Bearer Tokenï¼ˆè¶…çº§ç”¨æˆ·ï¼‰

#### è¯·æ±‚å‚æ•°
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|-------|------|-----|------|--------|
| page | int | å¦ | é¡µç ï¼ˆé»˜è®¤1ï¼‰ | 1 |
| size | int | å¦ | æ¯é¡µæ•°é‡ï¼ˆé»˜è®¤20ï¼Œæœ€å¤§100ï¼‰ | 20 |
| search | string | å¦ | æœç´¢å…³é”®è¯ï¼ˆç”¨æˆ·åã€é‚®ç®±ã€å§“åï¼‰ | test |
| status | string | å¦ | ç”¨æˆ·çŠ¶æ€è¿‡æ»¤ | active |

#### å“åº”å‚æ•°
```json
{
  "users": [
    {
      "id": 1,
      "username": "testuser",
      "email": "test@example.com",
      "full_name": "æµ‹è¯•ç”¨æˆ·",
      "status": "active",
      "is_superuser": false,
      "created_at": "2024-01-01T12:00:00Z"
    }
  ],
  "total": 100,
  "page": 1,
  "size": 20,
  "pages": 5
}
```

| å‚æ•°å | ç±»å‹ | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|-------|------|------|--------|
| users | array | ç”¨æˆ·åˆ—è¡¨ | è§ç”¨æˆ·å¯¹è±¡ |
| total | int | æ€»ç”¨æˆ·æ•° | 100 |
| page | int | å½“å‰é¡µç  | 1 |
| size | int | æ¯é¡µæ•°é‡ | 20 |
| pages | int | æ€»é¡µæ•° | 5 |

---

### 4. è·å–ç”¨æˆ·è¯¦æƒ…

**æ¥å£åç§°**: è·å–ç”¨æˆ·è¯¦æƒ…  
**åŠŸèƒ½æè¿°**: è·å–æŒ‡å®šç”¨æˆ·çš„è¯¦ç»†ä¿¡æ¯ï¼ˆä»…è¶…çº§ç”¨æˆ·ï¼‰  
**æ¥å£åœ°å€**: `/api/v1/users/{user_id}`  
**è¯·æ±‚æ–¹å¼**: GET  
**è®¤è¯**: éœ€è¦Bearer Tokenï¼ˆè¶…çº§ç”¨æˆ·ï¼‰

#### è¯·æ±‚å‚æ•°
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|-------|------|-----|------|--------|
| user_id | int | æ˜¯ | ç”¨æˆ·IDï¼ˆè·¯å¾„å‚æ•°ï¼‰ | 1 |

#### å“åº”å‚æ•°
è¿”å›ç”¨æˆ·è¯¦ç»†ä¿¡æ¯ï¼Œæ ¼å¼åŒ"è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯"ã€‚

#### é”™è¯¯ç 
- `404`: ç”¨æˆ·ä¸å­˜åœ¨
- `403`: æƒé™ä¸è¶³

---

### 5. æ›´æ–°ç”¨æˆ·ä¿¡æ¯

**æ¥å£åç§°**: æ›´æ–°ç”¨æˆ·ä¿¡æ¯  
**åŠŸèƒ½æè¿°**: æ›´æ–°æŒ‡å®šç”¨æˆ·çš„ä¿¡æ¯ï¼ˆä»…è¶…çº§ç”¨æˆ·ï¼‰  
**æ¥å£åœ°å€**: `/api/v1/users/{user_id}`  
**è¯·æ±‚æ–¹å¼**: PUT  
**è®¤è¯**: éœ€è¦Bearer Tokenï¼ˆè¶…çº§ç”¨æˆ·ï¼‰

#### è¯·æ±‚å‚æ•°
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|-------|------|-----|------|--------|
| user_id | int | æ˜¯ | ç”¨æˆ·IDï¼ˆè·¯å¾„å‚æ•°ï¼‰ | 1 |

è¯·æ±‚ä½“æ ¼å¼åŒ"æ›´æ–°å½“å‰ç”¨æˆ·ä¿¡æ¯"ã€‚

#### å“åº”å‚æ•°
è¿”å›æ›´æ–°åçš„ç”¨æˆ·ä¿¡æ¯ã€‚

---

### 6. åˆ é™¤ç”¨æˆ·

**æ¥å£åç§°**: åˆ é™¤ç”¨æˆ·  
**åŠŸèƒ½æè¿°**: è½¯åˆ é™¤æŒ‡å®šç”¨æˆ·ï¼ˆä»…è¶…çº§ç”¨æˆ·ï¼‰  
**æ¥å£åœ°å€**: `/api/v1/users/{user_id}`  
**è¯·æ±‚æ–¹å¼**: DELETE  
**è®¤è¯**: éœ€è¦Bearer Tokenï¼ˆè¶…çº§ç”¨æˆ·ï¼‰

#### è¯·æ±‚å‚æ•°
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|-------|------|-----|------|--------|
| user_id | int | æ˜¯ | ç”¨æˆ·IDï¼ˆè·¯å¾„å‚æ•°ï¼‰ | 1 |

#### å“åº”å‚æ•°
```json
{
  "message": "ç”¨æˆ·å·²åˆ é™¤"
}
```

---

### 7. æ¿€æ´»ç”¨æˆ·

**æ¥å£åç§°**: æ¿€æ´»ç”¨æˆ·  
**åŠŸèƒ½æè¿°**: æ¿€æ´»æŒ‡å®šç”¨æˆ·è´¦æˆ·ï¼ˆä»…è¶…çº§ç”¨æˆ·ï¼‰  
**æ¥å£åœ°å€**: `/api/v1/users/{user_id}/activate`  
**è¯·æ±‚æ–¹å¼**: POST  
**è®¤è¯**: éœ€è¦Bearer Tokenï¼ˆè¶…çº§ç”¨æˆ·ï¼‰

#### è¯·æ±‚å‚æ•°
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|-------|------|-----|------|--------|
| user_id | int | æ˜¯ | ç”¨æˆ·IDï¼ˆè·¯å¾„å‚æ•°ï¼‰ | 1 |

#### å“åº”å‚æ•°
```json
{
  "message": "ç”¨æˆ·å·²æ¿€æ´»"
}
```

---

### 8. åœç”¨ç”¨æˆ·

**æ¥å£åç§°**: åœç”¨ç”¨æˆ·  
**åŠŸèƒ½æè¿°**: åœç”¨æŒ‡å®šç”¨æˆ·è´¦æˆ·ï¼ˆä»…è¶…çº§ç”¨æˆ·ï¼‰  
**æ¥å£åœ°å€**: `/api/v1/users/{user_id}/deactivate`  
**è¯·æ±‚æ–¹å¼**: POST  
**è®¤è¯**: éœ€è¦Bearer Tokenï¼ˆè¶…çº§ç”¨æˆ·ï¼‰

#### è¯·æ±‚å‚æ•°
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|-------|------|-----|------|--------|
| user_id | int | æ˜¯ | ç”¨æˆ·IDï¼ˆè·¯å¾„å‚æ•°ï¼‰ | 1 |

#### å“åº”å‚æ•°
```json
{
  "message": "ç”¨æˆ·å·²åœç”¨"
}
```

---

### 9. é”å®šç”¨æˆ·

**æ¥å£åç§°**: é”å®šç”¨æˆ·  
**åŠŸèƒ½æè¿°**: ä¸´æ—¶é”å®šæŒ‡å®šç”¨æˆ·è´¦æˆ·ï¼ˆä»…è¶…çº§ç”¨æˆ·ï¼‰  
**æ¥å£åœ°å€**: `/api/v1/users/{user_id}/lock`  
**è¯·æ±‚æ–¹å¼**: POST  
**è®¤è¯**: éœ€è¦Bearer Tokenï¼ˆè¶…çº§ç”¨æˆ·ï¼‰

#### è¯·æ±‚å‚æ•°
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|-------|------|-----|------|--------|
| user_id | int | æ˜¯ | ç”¨æˆ·IDï¼ˆè·¯å¾„å‚æ•°ï¼‰ | 1 |
| duration_minutes | int | å¦ | é”å®šæ—¶é•¿ï¼ˆåˆ†é’Ÿï¼Œé»˜è®¤30ï¼‰ | 60 |

#### å“åº”å‚æ•°
```json
{
  "message": "ç”¨æˆ·å·²é”å®š 60 åˆ†é’Ÿ"
}
```

---

### 10. è§£é”ç”¨æˆ·

**æ¥å£åç§°**: è§£é”ç”¨æˆ·  
**åŠŸèƒ½æè¿°**: è§£é”æŒ‡å®šç”¨æˆ·è´¦æˆ·ï¼ˆä»…è¶…çº§ç”¨æˆ·ï¼‰  
**æ¥å£åœ°å€**: `/api/v1/users/{user_id}/unlock`  
**è¯·æ±‚æ–¹å¼**: POST  
**è®¤è¯**: éœ€è¦Bearer Tokenï¼ˆè¶…çº§ç”¨æˆ·ï¼‰

#### è¯·æ±‚å‚æ•°
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|-------|------|-----|------|--------|
| user_id | int | æ˜¯ | ç”¨æˆ·IDï¼ˆè·¯å¾„å‚æ•°ï¼‰ | 1 |

#### å“åº”å‚æ•°
```json
{
  "message": "ç”¨æˆ·å·²è§£é”"
}
```

---

### 11. è·å–ç”¨æˆ·ç»Ÿè®¡

**æ¥å£åç§°**: è·å–ç”¨æˆ·ç»Ÿè®¡  
**åŠŸèƒ½æè¿°**: è·å–ç”¨æˆ·ç›¸å…³çš„ç»Ÿè®¡ä¿¡æ¯ï¼ˆä»…è¶…çº§ç”¨æˆ·ï¼‰  
**æ¥å£åœ°å€**: `/api/v1/users/stats/overview`  
**è¯·æ±‚æ–¹å¼**: GET  
**è®¤è¯**: éœ€è¦Bearer Tokenï¼ˆè¶…çº§ç”¨æˆ·ï¼‰

#### è¯·æ±‚å‚æ•°
æ— 

#### å“åº”å‚æ•°
```json
{
  "total_users": 1000,
  "active_users": 950,
  "new_users_today": 5,
  "new_users_this_week": 25,
  "new_users_this_month": 100,
  "login_count_today": 200,
  "login_count_this_week": 1200,
  "login_count_this_month": 5000
}
```

| å‚æ•°å | ç±»å‹ | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|-------|------|------|--------|
| total_users | int | æ€»ç”¨æˆ·æ•° | 1000 |
| active_users | int | æ´»è·ƒç”¨æˆ·æ•° | 950 |
| new_users_today | int | ä»Šæ—¥æ–°å¢ç”¨æˆ· | 5 |
| new_users_this_week | int | æœ¬å‘¨æ–°å¢ç”¨æˆ· | 25 |
| new_users_this_month | int | æœ¬æœˆæ–°å¢ç”¨æˆ· | 100 |
| login_count_today | int | ä»Šæ—¥ç™»å½•æ¬¡æ•° | 200 |
| login_count_this_week | int | æœ¬å‘¨ç™»å½•æ¬¡æ•° | 1200 |
| login_count_this_month | int | æœ¬æœˆç™»å½•æ¬¡æ•° | 5000 |

## ğŸ”§ ä½¿ç”¨ç¤ºä¾‹

### ç”¨æˆ·è‡ªæˆ‘ç®¡ç†
```bash
# è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯
curl -X GET "http://localhost:8000/api/v1/users/me" \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN"

# æ›´æ–°å½“å‰ç”¨æˆ·ä¿¡æ¯
curl -X PUT "http://localhost:8000/api/v1/users/me" \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "full_name": "æ–°çš„å§“å",
    "bio": "æ›´æ–°çš„ä¸ªäººç®€ä»‹",
    "theme": "dark"
  }'
```

### ç®¡ç†å‘˜ç”¨æˆ·ç®¡ç†
```bash
# è·å–ç”¨æˆ·åˆ—è¡¨
curl -X GET "http://localhost:8000/api/v1/users/?page=1&size=20&search=test" \
  -H "Authorization: Bearer ADMIN_ACCESS_TOKEN"

# æ¿€æ´»ç”¨æˆ·
curl -X POST "http://localhost:8000/api/v1/users/1/activate" \
  -H "Authorization: Bearer ADMIN_ACCESS_TOKEN"

# é”å®šç”¨æˆ·60åˆ†é’Ÿ
curl -X POST "http://localhost:8000/api/v1/users/1/lock?duration_minutes=60" \
  -H "Authorization: Bearer ADMIN_ACCESS_TOKEN"

# è·å–ç”¨æˆ·ç»Ÿè®¡
curl -X GET "http://localhost:8000/api/v1/users/stats/overview" \
  -H "Authorization: Bearer ADMIN_ACCESS_TOKEN"
```

## ğŸš¨ æ³¨æ„äº‹é¡¹

1. **æƒé™æ§åˆ¶**: æ™®é€šç”¨æˆ·åªèƒ½ç®¡ç†è‡ªå·±çš„ä¿¡æ¯ï¼Œç®¡ç†å‘˜å¯ä»¥ç®¡ç†æ‰€æœ‰ç”¨æˆ·
2. **è½¯åˆ é™¤**: åˆ é™¤ç”¨æˆ·é‡‡ç”¨è½¯åˆ é™¤æ–¹å¼ï¼Œæ•°æ®ä¸ä¼šçœŸæ­£åˆ é™¤
3. **çŠ¶æ€ç®¡ç†**: ç”¨æˆ·çŠ¶æ€åŒ…æ‹¬ activeï¼ˆæ´»è·ƒï¼‰ã€inactiveï¼ˆåœç”¨ï¼‰ã€lockedï¼ˆé”å®šï¼‰
4. **æœç´¢åŠŸèƒ½**: æ”¯æŒæŒ‰ç”¨æˆ·åã€é‚®ç®±ã€å§“åè¿›è¡Œæ¨¡ç³Šæœç´¢
5. **åˆ†é¡µæŸ¥è¯¢**: ç”¨æˆ·åˆ—è¡¨æ”¯æŒåˆ†é¡µï¼Œå»ºè®®åˆç†è®¾ç½®æ¯é¡µæ•°é‡
